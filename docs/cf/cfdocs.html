<!DOCTYPE html>
<html>
<head>
  <title>Garklein's stuff</title>
  <style>
body     { display:flex; flex-direction:column; align-items:center;
           font-size:1rem; margin:min(10vw,100px) auto; }
pre      { max-width:min(80ch,80vw); margin:auto; white-space:pre-wrap; }
.code    { max-width:80vw; word-break:break-all; }
.white   { color:#444444; }
.red     { color:#ff0000; }
.green   { color:#00aa00; }
.hgreen  { color:#008800; }
.blue    { color:#0000ff; }
.yellow  { color:#ddaa00; }
.magenta { color:#ff00ff; }
.cyan    { color:#00cccc; }
  </style>
</head>
<body><div>
<pre>
<span class=red>color</span><span class=green>Forth</span> Word Documentation
=============================

There isn't much existing documentation for <span class=red>color</span><span class=green>Forth</span> words, so this is my attempt to fill in the gaps.


Kernel Words
============

These words are defined in the kernel, not in Forth. As such, I need to guess as to what some of them do.

<span class=green>1,</span> <span class=green>2,</span> <span class=green>3,</span> <span class=green>,</span>
These words insert ("comma in") 1, 2, 3, and 4 bytes into the dictionary respectively, from the stack. The bytes are inserted in reverse order, so something like <span class=green>74 2,</span> will insert 74 00 into the dictionary.

<span class=green>macro</span> <span class=green>forth</span>
Switch to the macro/forth word list. This means that all future definitions, until the next <span class=green>forth</span>/<span class=green>macro</span>, will be inserted into that word list.

<span class=green>;</span>
End a word. todo: look more into this, sometimes it's a ret, sometimes does tco

<span class=green>?dup</span>
<span class=green>?dup</span> is used at a very low level when we want to push something new onto the stack. It duplicates the top element, allowing us to overwrite the new top element to "push".
However, if the last compile instruction was a <span class=green>drop</span>, <span class=green>?dup</span> will instead just uncompile the <span class=green>drop</span>. In this case, we again have something to overwrite, and we have saved instructions!
The question mark in its name comes from the fact that it will sometimes dup, and sometimes uncompile a <span class=green>drop</span>. It is not related to the classic forth <a href='https://forth-standard.org/standard/core/qDUP'>?dup</a>, which confused me a lot until I figured out what it did.
</pre>
<br>
<pre style='width:100%;text-align:center'><br><a href='../index.html'>~</a>/<a href='cf.html'>cf</a>/<a href='cfdocs.html'>cfdocs.html</a></pre>
</div></body>
</html>
