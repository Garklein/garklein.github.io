<!DOCTYPE html>
<html>
<head>
  <meta charset='UTF-8'>
  <title>manzikert.ca</title>
  <style>
body     { display:flex; flex-direction:column; align-items:center;
           font-size:1rem; margin:min(10vw,100px) auto; }
pre      { max-width:min(80ch,80vw); margin:auto; white-space:pre-wrap; }
.code    { max-width:80vw; word-break:break-all; }
.white   { color:#444444; }
.red     { color:#ff0000; }
.green   { color:#00aa00; }
.hgreen  { color:#008800; }
.blue    { color:#0000ff; }
.yellow  { color:#ddaa00; }
.magenta { color:#ff00ff; }
.cyan    { color:#00cccc; }
  </style>
</head>
<body><div>
<pre class='code'>
(r;u):.''"\n"\'"\n\n"\" "/"|"\1:"i/5.in"  / rules, updates
g:{(!d)@&gt;#'.d:=*'(|/'^x?)_r}'u            / correctly order each update (without the last element)
+/'(g@'-2!#'g)*/:~:\g~'-1_'u              / sum the centre elements of the correct and corrected updates separately
</pre><pre>

This orders pages by tracking "before" frequencies in all the applicable rules. The first page will have the most left hand side rule appearances, since the rules must place it before all the other pages, etc.

I didn't know the <a href='idioms'>dict trick</a> at the time...
</pre>
<br>
<pre style='width:100%;text-align:center'><br><a href='/'>~</a>/<a href='./'>aoc24k</a>/<a href='5'>5</a></pre>
</div></body>
</html>
